# 구성 가능한 웹 서버 배포

<br>

## Terraform 변수 사용
보안 그룹과 user data 구성을 보면 웹 서버 코드에 8080 포트가 중복되어 작성되어 있는데  
이는 **DRY(Don't Repeat Yourself) 원칙**, 즉 반복하지 말라는 원칙을 위반

두 곳에 포트 번호가 있는 경우 한 곳에서 포트 번호를 변경하면 다른 곳도 같이 변경해야 하는 작업 필요  
Terraform은 입력 변수를 정의하게 하므로 코드가 중복되지 않고 구성을 관리하기도 용이

```terraform
# 변수 선언 구문
variable "NAME" {
  [CONFIG ...]
}
```

변수 선언의 본문에는 3개의 매개 변수가 포함될 수 있으며 모두 선택적 매개 변수  
- **description**
  - 변수 사용 방법을 문서화할 때 사용
  - plan 또는 apply 명령어를 실행할 때 표시
- **default**
  - 변수에 값을 전달하는 여러 가지 방법 존재
    - 명령 줄(-var 옵션)
    - 파일(-var-file 옵션)
    - 환경 변수(TF_VAR_<variable_name>)
  - 만약 값이 전달되지 않으면 기본값을 전달
  - 기본값이 없으면 Terraform은 대화식으로 사용자에게 변수에 대한 정보를 요청
- **type**
  - 사용자가 전달하는 변수의 유형을 지정
    - string
    - number
    - bool
    - list
    - map
    - set
    - object
    - tuple
  - 유형을 지정하지 않으면 Terraform은 any로 간주
